<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Svg Recreation</title>
</head>

<body>
    <div id="canvas"></div>

    <script>
        // Svg canvas size
        const VB_HEIGHT = "100%";
        const VB_WIDTH = "100%";
        const VB = [-10, -10, 680, 680];

        // Circle
        const circle = (cx, cy, r, stroke = "black", fill = "black") => {
            return `
                <circle cx="${cx}" cy="${cy}" r="${r}" stroke=${stroke} fill=${fill} />
            `;
        }

        // Ellipse
        const ellipse = (cx, cy, rx, ry, stroke = "black", fill = "black") => {
            return `
                <ellipse cx="${cx}" cy="${cy}" rx="${rx}" ry="${ry}" stroke=${stroke} fill=${fill} />
            `;
        }

        // Rectangle
        const rect = (x, y, width, height, stroke = "black", fill = "black") => {
            return `
                <rect x="${x}" y="${y}" width="${width}" height="${height}" stroke=${stroke} fill=${fill} />
            `;
        }

        // Polygon
        const polygon = (points, stroke = "black", fill = "black") => {
            let pointsList = ``;

            points.forEach(e => {
                pointsList += `${e} `;
            });

            return `
                <polygon points="${pointsList}" stroke=${stroke} fill=${fill} />
            `;
        }

        // Line
        const line = (x1, y1, x2, y2, stroke = "black", rotation = [0, 0, 0]) => {
            return `
                <line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke=${stroke} />
            `;
        }

        // Polyline
        const polyline = (points, stroke = "black") => {
            let pointsList = ``;

            points.forEach(e => {
                pointsList += `${e} `;
            });

            return `
                <polyline points="${pointsList}" stroke="${stroke}" fill="none" />
            `;
        }

        // Path
        const path = (points, stroke = "black") => {
            let pointsList = "";

            for (let i = 0; i < points.length - 1; i = i + 2) {
                if (i < 1) {
                    pointsList += `M${points[i]} ${points[i + 1]} `;
                }
                else {
                    pointsList += `L${points[i]} ${points[i + 1]} `;
                }
            }

            pointsList += `Z`;

            return `
                <path 
                    d="${pointsList}"
                    stroke="${stroke}" fill="none" />
            `;
        }

        // Rotate
        const rotate = (shape, rotation = [0, 0, 0]) => {
            return `
            <g transform="rotate(${rotation[0]}, ${rotation[1]}, ${rotation[2]})">
                ${shape}
            </g>
            `;
        }

        // Scale


        //Translate


        // (Des)Orders
        const desOrders = () => {
            // Number of rows and columns
            const ROW = 15;
            const COL = 15;

            // Min/max rectangles
            const MIN_RECT = 4;
            const MAX_RECT = 11;
            const RANGE_RECT = MAX_RECT - MIN_RECT;

            // Min/max starting x & y values
            const MAX = 42;
            const MIN = -2;
            const SIZE = MAX + Math.abs(MIN);
            let range1 = 3;
            let range2 = 4;

            // List of previous points
            let prevPoints = [MIN, MIN, MAX, MIN, MAX, MAX, MIN, MAX];
            let currentPoints;

            // Svg string
            let data = "";

            // Initialize number of rectangles
            let rectangles = Math.floor(Math.random() * RANGE_RECT) + MIN_RECT;

            for (let r = 0; r < ROW; r++) {
                for (let c = 0; c < COL; c++) {
                    let first = true;
                    for (let i = 0; i < rectangles; i++) {
                        // Random range of points
                        if (first) {
                            currentPoints =
                                [Math.random() * range1 + prevPoints[0] + (SIZE * c),// Min x
                                Math.random() * range1 + prevPoints[1] + (SIZE * r), // Min y
                                Math.random() * range1 + prevPoints[2] - range1 + (SIZE * c), // Max x
                                Math.random() * range1 + prevPoints[3] + (SIZE * r), // Min y
                                Math.random() * range1 + prevPoints[4] - range1 + (SIZE * c), // Max x
                                Math.random() * range1 + prevPoints[5] - range1 + (SIZE * r), // Max y
                                Math.random() * range1 + prevPoints[6] + (SIZE * c), // Min x
                                Math.random() * range1 + prevPoints[7] - range1 + (SIZE * r)]; // Max y
                        }
                        else {
                            currentPoints =
                                [Math.random() * range2 + prevPoints[0],// Min x
                                Math.random() * range2 + prevPoints[1], // Min y
                                Math.random() * range2 + prevPoints[2] - range2, // Max x
                                Math.random() * range2 + prevPoints[3], // Min y
                                Math.random() * range2 + prevPoints[4] - range2, // Max x
                                Math.random() * range2 + prevPoints[5] - range2, // Max y
                                Math.random() * range2 + prevPoints[6], // Min x
                                Math.random() * range2 + prevPoints[7] - range2]; // Max y
                        }

                        // Add each rectangle to  the svg string
                        data += path(currentPoints, "black");

                        prevPoints = currentPoints;
                        first = false;
                    }
                    prevPoints = [MIN, MIN, MAX, MIN, MAX, MAX, MIN, MAX];
                    rectangles = Math.floor(Math.random() * RANGE_RECT) + MIN_RECT;
                }
            }

            return data;
        }

        // Make the svg
        const rouge = (width, height, vb) => {
            return `
                ${rotate(rect(1, 35, 25, 25, "none", "#BE2A2A"), [5, 1, 60])}
                ${rotate(rect(20, 10, 25, 25, "none", "#6B2933"), [-26, 20, 35])}
                ${rotate(rect(55, 45, 25, 25, "none", "#6B2933"), [4, 55, 70])}
                ${rotate(rect(51, 55, 25, 25, "none", "#6B2933"), [-25, 51, 80])}
                ${rotate(rect(30, 3, 25, 25, "none", "rgba(190,42,42,0.98)"), [-3, 55, 3])}
                ${rotate(rect(71, 74, 25, 25, "none", "#BE2A2A"), [-48, 71, 100])}
                ${rotate(rect(12, 20, 25, 25, "none", "#E84139"), [45, 24, 32])}
                ${rotate(rect(45, 25, 25, 25, "none", "#E84139"), [-10, 57, 37])}
                ${rotate(rect(74, 75, 25, 25, "none", "#E42524"), [14, 100, 75])}
            `;
        }

        const makeSvg = (svg, width, height, vb) => {
            return `
            <svg width=${width} height=${height} viewbox="${vb[0]} ${vb[1]} ${vb[2]} ${vb[3]}">
                ${rect(vb[0], vb[1], vb[2], vb[3], "none", "#EEEDEB")}
                ${svg}
            </svg>
            `;
        }

        // Draw the svg
        document.querySelector("#canvas").innerHTML = makeSvg(desOrders(), VB_WIDTH, VB_HEIGHT, VB);
    </script>
</body>

</html>